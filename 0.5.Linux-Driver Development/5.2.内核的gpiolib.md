随笔--linux内核的gpiolib学习
============================

> gpiolib引入：(1)一个事实：很多硬件都要用到GPIO，**GPIO会复用**；(2)如果同一个GPIO被2个驱动同时控制了，就会出现bug；(3)**内核提供gpiolib来统一管理系统中所有GPIO**；(4)gpiolib本身属于驱动框架的一部分


**gpiolib学习重点**：

* gpiolib的建立过程：和虚拟地址的建立类似，内核在启动的过程中去调用gpiolib建立函数建立gpiolib
* gpiolib的使用方法：申请、使用、释放
* gpiolib的架构：涉及哪些目录的哪些文件里面的哪些函数哪些数据结构哪些变量，谁调用谁，为什么要分开为什么不写在一个文件，等你能理解这些的时候你就有了架构意识。


##开机调用gpiolib的建立函数
> gpiolib的建立函数：`s5pv210_gpiolib_init`

![p.5-3-01](https://raw.githubusercontent.com/TongxinV/oneBook/master/0.5.Linux-Driver%20Development/assets/%E5%9B%BE%E7%89%87.5-3-01.png)


##gpiolib的建立
> 填充一个个`s3c_gpio_chip`这个结构体定义的变量（GPIO端口的抽象），最后把一个个端口的抽象的地址挂接到内核维护的一个`gpio_desc结构体指针数组`














